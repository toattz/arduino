<html>
  <head>
    <meta charset="utf-8">
    <title>ESP8266 Web Server Switch handling</title>
  </head>
  <body>
    <form enctype="text/plain">
      <div style="position:absolute;left:50%;top:50%;margin-left:-150px;margin-top:-150px;">
        <h1>狀態:開</h1><br>
        <input type="hidden" id="sw" value="0">
        <input id="submit" type="button" value="關" style="width:120px;height:40px;font-size:20px;">
      </div>
    </form>
  </body>
</html>
<script>
  function getData()
  {
    $.get("/state",function(data){
      //alert(data)
      if(data==1)
      {
        //alert("on");
        $("#sw").value(0);
        $("#submit").value("開");
      }
      else
      {
        //alert("off");
        $("#sw").value(1);
        $("#submit").value("關");
      }
    });
  }

  $(function(){
    getData();
  });

  $("#submit").click(function(){
    var data = $("#sw").value();
    $.get("/sw", { val: data });
    sleep(1);
    getData();
  });
</script>